{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"52629848-261c53034f3f85396bd8026ef\";\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n    try {\n        const { data } = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page,\n                per_page: perPage,\n            },\n        });\n        return data;\n    } catch (error) {\n        console.error(\"Pixabay API error:\", error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n    captionPosition: \"bottom\",\n});\n\nexport function createGallery(images) {\n    const markup = images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => `\n      <li class=\"list-item\">\n        <a href=\"${largeImageURL}\" class=\"item-img-link\">\n          <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"img-info-wrap\">\n          <div class=\"img-info\"><p>Likes</p><p>${likes}</p></div>\n          <div class=\"img-info\"><p>Views</p><p>${views}</p></div>\n          <div class=\"img-info\"><p>Comments</p><p>${comments}</p></div>\n          <div class=\"img-info\"><p>Downloads</p><p>${downloads}</p></div>\n        </div>\n      </li>`\n        )\n        .join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.add(\"visible\");\n}\n\nexport function hideLoader() {\n    loader.classList.remove(\"visible\");\n}\n","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n} from \"./js/render-functions.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst searchBtn = document.querySelector('button[type=\"submit\"]');\nconst searchInput = document.querySelector('input[name=\"search-text\"]');\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nconst perPage = 15;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nasync function onSubmit(event) {\n    event.preventDefault();\n    const userQuery = searchInput.value.trim();\n\n    if (!userQuery) {\n        iziToast.error({\n            message: \"‚ùå Search field cannot be empty!\",\n            color: \"red\",\n            position: \"topRight\",\n            messageSize: \"18\",\n            icon: false,\n            progressBar: false,\n        });\n        return;\n    }\n\n\n\n    currentQuery = userQuery;\n    currentPage = 1;\n\n    clearGallery();\n    hideLoadMore();\n    showLoader();\n    searchBtn.disabled = true;\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage, perPage);\n        totalHits = data.totalHits;\n\n        if (!data.hits.length) {\n            iziToast.error({\n                message:\n                    \"‚ùå Sorry, there are no images matching your search query. Please try again!\",\n                color: \"red\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        if (currentPage * perPage < totalHits) {\n            showLoadMore();\n        }\n\n    } catch (error) {\n        iziToast.error({\n            message: \"‚ùå Network Error\",\n            color: \"red\",\n            position: \"topRight\",\n        });\n    } finally {\n        form.reset();\n        hideLoader();\n        searchBtn.disabled = false;\n    }\n}\n\nasync function onLoadMore() {\n    currentPage += 1;\n\n    showLoader();\n    hideLoadMore();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage, perPage);\n        createGallery(data.hits);\n\n        smoothScroll();\n\n        const totalLoaded = currentPage * perPage;\n        if (totalLoaded >= totalHits) {\n            hideLoadMore();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                color: \"blue\",\n            });\n        } else {\n            showLoadMore();\n        }\n    } catch (error) {\n        iziToast.error({\n            message: \"‚ùå Error loading more images!\",\n            color: \"red\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\n// üîπ –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó\nfunction showLoadMore() {\n    loadMoreBtn.classList.remove(\"hidden\");\n}\nfunction hideLoadMore() {\n    loadMoreBtn.classList.add(\"hidden\");\n}\n\n// üîπ –ü–ª–∞–≤–Ω–µ –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—è\nfunction smoothScroll() {\n    const galleryItem = document\n        .querySelector(\".gallery .list-item\")\n        ?.getBoundingClientRect();\n\n    if (galleryItem) {\n        const height = galleryItem.height;\n        window.scrollBy({\n            top: height * 2,\n            behavior: \"smooth\",\n        });\n    }\n}\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","perPage","data","axios","error","gallery","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","form","searchBtn","searchInput","loadMoreBtn","currentPage","currentQuery","totalHits","onSubmit","onLoadMore","event","userQuery","iziToast","hideLoadMore","showLoadMore","smoothScroll","galleryItem","_a","height"],"mappings":"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"}